{"componentChunkName":"component---src-templates-post-template-tsx","path":"/2024-09-15-기술 블로그 템플릿화 프로젝트 0/","result":{"data":{"allMarkdownRemark":{"edges":[{"node":{"html":"<h1>기존 블로그 개발</h1>\n<p>저는 이전에 지인의 부탁으로 Gatsby와 React를 기반으로 개인 기술 블로그를 개발한 경험이 있습니다. Gatsby는 정적 사이트 생성에, React는 컴포넌트 기반 UI 관리에 적합하여 초기 블로그 개발을 효율적이고 빠르게 진행할 수 있었습니다.</p>\n<img width=\"500\" alt=\"image\" style=\"margin: 20px 0px\" src=\"https://gist.github.com/user-attachments/assets/d93e7612-af30-43ac-9d45-33643da823d5\">\n<p>하지만 블로그가 확장되고 관리해야 할 콘텐츠가 늘어나면서 포스트와 템플릿 코드가 <strong>하나의 코드베이스</strong>에서 관리되는 구조적 문제로 인해 확장성과 유지보수에 어려움이 발생하기 시작했습니다. 기술 자체는 문제가 없었지만, 템플릿과 포스트가 통합된 구조는 관리의 복잡성을 더했습니다. 이를 해결하기 위해 <strong>코드베이스를 분리하는 템플릿화 작업</strong>을 진행하게 되었습니다.</p>\n<h3>주요 문제점:</h3>\n<ol>\n<li><strong>포스트와 템플릿 코드 혼재</strong>: 다른 사용자의 포스트 업데이트와 제가 수정한 템플릿 코드가 동일한 레포에서 관리되다 보니, 커밋 로그를 확인하거나 특정 커밋으로 리셋할 때 두 작업이 혼재되어 불편함이 있었고, 서로 다른 업데이트를 분리해 관리하기가 어려웠습니다.</li>\n<li><strong>템플릿 재사용성 부족</strong>: 제가 만든 템플릿을 다른 프로젝트(지인 블로그가 아닌 개인 블로그)에서도 사용하고 싶었지만, 포스트와 템플릿이 통합된 구조에서는 재사용에 한계가 있었습니다. 여러 사용자가 같은 템플릿을 사용하면서도 각자의 포스트는 독립적으로 관리할 수 있도록 템플릿과 포스트를 분리할 필요가 있었습니다.</li>\n</ol>\n<h1><strong>템플릿화의 이점</strong></h1>\n<p>이러한 문제를 해결하기 위해 템플릿화 작업을 진행하며 얻을 수 있는 이점은 다음과 같습니다.</p>\n<h3>주요 이점:</h3>\n<ol>\n<li><strong>코드 관리의 명확성</strong>: 포스트와 템플릿이 분리되어 각각 독립적으로 관리됩니다. 템플릿을 업데이트해도 포스트에 영향을 주지 않으며, 문제가 발생했을 때 빠르게 원인을 파악할 수 있어 유지보수가 용이합니다.</li>\n<li><strong>템플릿의 공유와 재사용성</strong>: 여러 프로젝트에서 동일한 템플릿을 쉽게 재사용할 수 있습니다. 동일한 템플릿을 기반으로 여러 사용자가 자신의 포스트를 관리할 수 있으며, 필요에 따라 템플릿을 업데이트하고 각 프로젝트에서 독립적으로 반영할 수 있습니다.</li>\n<li><strong>사용자에게 독립된 작업 환경 제공</strong>: 각 사용자는 템플릿을 사용해 자신의 포스트 콘텐츠만 관리할 수 있습니다. 블로그 템플릿과 포스트가 섞이지 않도록 구조가 명확히 구분되어, 여러 사용자가 같은 템플릿을 기반으로 독립적으로 작업할 수 있는 환경을 제공합니다.</li>\n</ol>\n<h1><strong>템플릿화 과정</strong></h1>\n<p>문제 해결과 이점을 목표로 한 템플릿화 과정을 간략히 소개하겠습니다.</p>\n<ol>\n<li>\n<p><strong>Step 1: 기존 레포에서 템플릿 코드 분리하기</strong></p>\n<p>기존 블로그 레포에서 <strong>UI 및 레이아웃 관련 템플릿 코드</strong>를 분리해 독립적인 템플릿 레포를 생성했습니다. 이 작업은 커밋을 cherry-pick으로 선택해 필요한 부분만 가져오는 방식으로 진행했습니다.</p>\n<pre class=\"grvsc-container default-dark\" data-language=\"\" data-index=\"0\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\">git cherry-pick &lt;템플릿 관련 커밋 해시&gt;</span></span></code></pre>\n</li>\n<li>\n<p><strong>Step 2: 템플릿을 서브모듈로 불러오고 포스트 레포에 배포되도록 설정하기</strong></p>\n<p><strong>Git 서브모듈</strong>을 사용해 템플릿을 각 블로그 프로젝트에 쉽게 적용할 수 있도록 하고, gh-pages로 배포할 때 repo 옵션을 사용해 포스트 레포에 배포되도록 설정했습니다.</p>\n<pre class=\"grvsc-container default-dark\" data-language=\"\" data-index=\"1\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\">git submodule add &lt;템플릿 레포&gt;</span></span></code></pre>\n<pre class=\"grvsc-container default-dark\" data-language=\"\" data-index=\"2\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\">gatsby build &amp;&amp; gh-pages -d public -b main --repo &lt;포스트 레포&gt;</span></span></code></pre>\n</li>\n<li>\n<p><strong>Step 3: 커스텀 데이터 별도 파일로 분리</strong></p>\n<p>사용자별 커스텀 데이터를 별도의 파일로 분리해 템플릿과 포스트 데이터가 명확히 분리된 상태로 관리되도록 했습니다.</p>\n<pre class=\"grvsc-container default-dark\" data-language=\"\" data-index=\"3\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\">&lt;포스트 레포&gt;/</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">├── &lt;템플릿 레포&gt;/ (서브모듈)</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">├── contents/ (사용자 포스트 관리)</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">├── static/ (사용자 이미지 관리)</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">└── gatsby-meta-config.js (사용자 커스텀 데이터 관리)</span></span></code></pre>\n</li>\n<li>\n<p><strong>Step 4: 분리한 커스텀 데이터 템플릿 레포에 받아오기</strong>\n커스텀 데이터를 받아와 템플릿 내에서 사용할 수 있도록 설정하고, gatsby-source-filesystem 플러그인을 사용하여 콘텐츠와 이미지 파일을 템플릿에서 접근할 수 있게 설정하였습니다.</p>\n<pre class=\"grvsc-container default-dark\" data-language=\"js\" data-index=\"4\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk3\">// gatsby-config.js</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk4\">const</span><span class=\"mtk1\"> </span><span class=\"mtk12\">metaConfig</span><span class=\"mtk1\"> = </span><span class=\"mtk11\">require</span><span class=\"mtk1\">(</span><span class=\"mtk8\">&quot;../gatsby-meta-config&quot;</span><span class=\"mtk1\">);</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk10\">module</span><span class=\"mtk1\">.</span><span class=\"mtk10\">exports</span><span class=\"mtk1\"> = {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk12\">siteMetadata:</span><span class=\"mtk1\"> </span><span class=\"mtk12\">metaConfig</span><span class=\"mtk1\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk12\">plugins:</span><span class=\"mtk1\"> [</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      </span><span class=\"mtk12\">resolve:</span><span class=\"mtk1\"> </span><span class=\"mtk8\">`gatsby-source-filesystem`</span><span class=\"mtk1\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      </span><span class=\"mtk12\">options:</span><span class=\"mtk1\"> {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        </span><span class=\"mtk12\">name:</span><span class=\"mtk1\"> </span><span class=\"mtk8\">`contents`</span><span class=\"mtk1\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        </span><span class=\"mtk12\">path:</span><span class=\"mtk1\"> </span><span class=\"mtk8\">`</span><span class=\"mtk4\">${</span><span class=\"mtk12\">__dirname</span><span class=\"mtk4\">}</span><span class=\"mtk8\">/../contents`</span><span class=\"mtk1\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      },</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    },</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      </span><span class=\"mtk12\">resolve:</span><span class=\"mtk1\"> </span><span class=\"mtk8\">`gatsby-source-filesystem`</span><span class=\"mtk1\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      </span><span class=\"mtk12\">options:</span><span class=\"mtk1\"> {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        </span><span class=\"mtk12\">name:</span><span class=\"mtk1\"> </span><span class=\"mtk8\">`images`</span><span class=\"mtk1\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        </span><span class=\"mtk12\">path:</span><span class=\"mtk1\"> </span><span class=\"mtk8\">`</span><span class=\"mtk4\">${</span><span class=\"mtk12\">__dirname</span><span class=\"mtk4\">}</span><span class=\"mtk8\">/../static`</span><span class=\"mtk1\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      },</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    },</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk3\">// ...</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  ],</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">};</span></span></span></code></pre>\n</li>\n<li>\n<p><strong>Step 5: 포스트 레포에서 템플릿 npm 스크립트 동작하도록 설정하기</strong></p>\n<p>포스트 레포에서 npm 스크립트를 사용하여 템플릿 레포의 설치, 실행, 배포 작업을 간편하게 처리할 수 있도록 설정해주었습니다.</p>\n<pre class=\"grvsc-container default-dark\" data-language=\"json\" data-index=\"5\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">{</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk12\">&quot;scripts&quot;</span><span class=\"mtk1\">: {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk12\">&quot;install&quot;</span><span class=\"mtk1\">: </span><span class=\"mtk8\">&quot;npm --prefix &lt;템플릿 서브모듈 경로&gt; install&quot;</span><span class=\"mtk1\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk12\">&quot;start&quot;</span><span class=\"mtk1\">: </span><span class=\"mtk8\">&quot;npm --prefix &lt;템플릿 서브모듈 경로&gt; run start&quot;</span><span class=\"mtk1\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk12\">&quot;deploy&quot;</span><span class=\"mtk1\">: </span><span class=\"mtk8\">&quot;npm --prefix &lt;템플릿 서브모듈 경로&gt; run deploy&quot;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  }</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">}</span></span></span></code></pre>\n</li>\n<li>\n<p><strong>Step 6: path 포함 경로 배포 처리</strong></p>\n<p>path를 포함한 경로에 배포 시 발생할 수 있는 문제를 해결하고, 다양한 환경에서 템플릿이 정상적으로 작동하도록 설정했습니다.</p>\n<pre class=\"grvsc-container default-dark\" data-language=\"js\" data-index=\"6\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk3\">// gatsby-config.js</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk10\">module</span><span class=\"mtk1\">.</span><span class=\"mtk10\">exports</span><span class=\"mtk1\"> = {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk12\">pathPrefix:</span><span class=\"mtk1\"> </span><span class=\"mtk8\">`/blog`</span><span class=\"mtk1\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk3\">// ...</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">};</span></span></span></code></pre>\n<pre class=\"grvsc-container default-dark\" data-language=\"\" data-index=\"7\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\">gatsby build --prefix-paths</span></span></code></pre>\n</li>\n</ol>\n<h1><strong>마무리</strong></h1>\n<p>지금까지 템플릿화를 진행하게 된 이유와 그 과정에 대해 간략히 살펴보았습니다.</p>\n<p>다음 포스트부터는 각 단계에서 겪은 시행착오를 하나씩 다뤄보겠습니다.</p>\n<style class=\"grvsc-styles\">\n  .grvsc-container {\n    overflow: auto;\n    position: relative;\n    -webkit-overflow-scrolling: touch;\n    padding-top: 1rem;\n    padding-top: var(--grvsc-padding-top, var(--grvsc-padding-v, 1rem));\n    padding-bottom: 1rem;\n    padding-bottom: var(--grvsc-padding-bottom, var(--grvsc-padding-v, 1rem));\n    border-radius: 8px;\n    border-radius: var(--grvsc-border-radius, 8px);\n    font-feature-settings: normal;\n    line-height: 1.4;\n  }\n  \n  .grvsc-code {\n    display: table;\n  }\n  \n  .grvsc-line {\n    display: table-row;\n    box-sizing: border-box;\n    width: 100%;\n    position: relative;\n  }\n  \n  .grvsc-line > * {\n    position: relative;\n  }\n  \n  .grvsc-gutter-pad {\n    display: table-cell;\n    padding-left: 0.75rem;\n    padding-left: calc(var(--grvsc-padding-left, var(--grvsc-padding-h, 1.5rem)) / 2);\n  }\n  \n  .grvsc-gutter {\n    display: table-cell;\n    -webkit-user-select: none;\n    -moz-user-select: none;\n    user-select: none;\n  }\n  \n  .grvsc-gutter::before {\n    content: attr(data-content);\n  }\n  \n  .grvsc-source {\n    display: table-cell;\n    padding-left: 1.5rem;\n    padding-left: var(--grvsc-padding-left, var(--grvsc-padding-h, 1.5rem));\n    padding-right: 1.5rem;\n    padding-right: var(--grvsc-padding-right, var(--grvsc-padding-h, 1.5rem));\n  }\n  \n  .grvsc-source:empty::after {\n    content: ' ';\n    -webkit-user-select: none;\n    -moz-user-select: none;\n    user-select: none;\n  }\n  \n  .grvsc-gutter + .grvsc-source {\n    padding-left: 0.75rem;\n    padding-left: calc(var(--grvsc-padding-left, var(--grvsc-padding-h, 1.5rem)) / 2);\n  }\n  \n  /* Line transformer styles */\n  \n  .grvsc-has-line-highlighting > .grvsc-code > .grvsc-line::before {\n    content: ' ';\n    position: absolute;\n    width: 100%;\n  }\n  \n  .grvsc-line-diff-add::before {\n    background-color: var(--grvsc-line-diff-add-background-color, rgba(0, 255, 60, 0.2));\n  }\n  \n  .grvsc-line-diff-del::before {\n    background-color: var(--grvsc-line-diff-del-background-color, rgba(255, 0, 20, 0.2));\n  }\n  \n  .grvsc-line-number {\n    padding: 0 2px;\n    text-align: right;\n    opacity: 0.7;\n  }\n  \n  .default-dark {\n    background-color: #1E1E1E;\n    color: #D4D4D4;\n  }\n  .default-dark .mtk3 { color: #6A9955; }\n  .default-dark .mtk4 { color: #569CD6; }\n  .default-dark .mtk1 { color: #D4D4D4; }\n  .default-dark .mtk12 { color: #9CDCFE; }\n  .default-dark .mtk11 { color: #DCDCAA; }\n  .default-dark .mtk8 { color: #CE9178; }\n  .default-dark .mtk10 { color: #4EC9B0; }\n  .default-dark .grvsc-line-highlighted::before {\n    background-color: var(--grvsc-line-highlighted-background-color, rgba(255, 255, 255, 0.1));\n    box-shadow: inset var(--grvsc-line-highlighted-border-width, 4px) 0 0 0 var(--grvsc-line-highlighted-border-color, rgba(255, 255, 255, 0.5));\n  }\n</style>","frontmatter":{"title":"기술 블로그 템플릿화 프로젝트 0","summary":"포스트와 템플릿을 분리하고, 템플릿을 여러 사용자에게 제공하여 그들이 독립적으로 포스트를 관리할 수 있도록 하는 템플릿화 작업을 시작하게 되었습니다.","date":"2024.09.15.","categories":["blog_template"],"thumbnail":{"childImageSharp":{"gatsbyImageData":{"layout":"constrained","placeholder":{"fallback":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAABYlAAAWJQFJUiTwAAACKklEQVQoz52NXUtTARjHD5y9nx13ds525t7npnNZqTd2U1+hD9Bd9OKF0b2gRIRRQRBhV71gN3ZhN5rfoYSUynmhIeYIB164mOecuc1tv9hMCQKp/vDj4Xnh9wj1ep02tVqtw3H/N9RqVQ4bDZpwMhP437SanXJQLvH983sa9VqnF5rNJq1Wi1KpRLlcPrpttU6h7Wp07hpVi635p3yafYxlVY6Ea2trFItF8qt51tfXqVarncXxoz/4JTusGGzOT5N/Nc7iwzFW519QsSyE7e1v7O7uYpomhULhRHhqahabC9PMTl5lZvImC/dH+br4HGO/jLCxscHKygofl5f5sLTE3t4epmlhGAaGYf6Gwb5p0TB/kJ97wr1rl5mbGmPrzV2+vH3Gzk4Rs3KAEOxO0eUPowYTqHqKcDxLNDVALHWWWM854unzJDJDpPqGiaaHmbx+hcUHt3j36DaFuSlejt8gk7tAdvAS/YMXEQTRi+hQEJ0KoktFdKqILg2bO4jdo+OQQjjlMC45gscXQw/3MjI8wurMHV5PjKLofUhaBkXPooT6EewuBbvLj8Oj4pACOKUgLm8Id1c3Hl8ESYki+WN41QSylsSrprDJcQZyQ0TjOTxaBi2SQ4ucIRAdQBAdMjanD1tb7FZxeDQcUhCnpOOS2+JwR+xRYkj+OLKaxBfowa0kkQNp/KE+lFAWf3c/ajiHINol/k2awKsm6Qr04Aum8QUz+PTeE+lPKUJHcrIrqFIAAAAASUVORK5CYII="},"images":{"fallback":{"src":"/blog/static/34b3b81417ef0c541440feba6e1ea808/31908/blog.png","srcSet":"/blog/static/34b3b81417ef0c541440feba6e1ea808/3dc89/blog.png 406w,\n/blog/static/34b3b81417ef0c541440feba6e1ea808/98a58/blog.png 811w,\n/blog/static/34b3b81417ef0c541440feba6e1ea808/31908/blog.png 1622w","sizes":"(min-width: 1622px) 1622px, 100vw"},"sources":[{"srcSet":"/blog/static/34b3b81417ef0c541440feba6e1ea808/81018/blog.webp 406w,\n/blog/static/34b3b81417ef0c541440feba6e1ea808/55e9c/blog.webp 811w,\n/blog/static/34b3b81417ef0c541440feba6e1ea808/f1a1f/blog.webp 1622w","type":"image/webp","sizes":"(min-width: 1622px) 1622px, 100vw"}]},"width":1622,"height":880}},"publicURL":"/blog/static/34b3b81417ef0c541440feba6e1ea808/blog.png"}}}}]}},"pageContext":{"slug":"/2024-09-15-기술 블로그 템플릿화 프로젝트 0/"}},"staticQueryHashes":["1055621971","1967494090","2565620948","3429114748"]}